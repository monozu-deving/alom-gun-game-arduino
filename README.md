# 👽 ALOM 부스 방어 시스템 – 재가동 부스 설명

기계식 키보드 버튼으로 총알에 맞았는지 상황을 감지 (불빛이 들어오는 자리로)  
→ 감지 후 점수 추가  
→ 게임이 끝나면 점수 고지 (아두이노 3대를 사용하며, 합계는 부스 담당자가 최종 계산)  

이 시스템은 3개의 아두이노를 I2C로 연결하여 12개의 과녁(버튼+전등)을 제어하며,  
PC에서는 UFO GUI를 통해 실시간으로 랜덤한 타겟을 제시하고  
정답 버튼을 누를 때까지 기다린 후 다음 타겟으로 넘어갑니다.

---

## 📁 파일 구조

```

alom-gun-game-arduino/  
├── README.md                 # 본 설명 파일  
├── .gitignore                # Git 옵션 설정  
├── 3d\_file/  
│   ├── OldVersions/
│   │   └── button\_3d(N).ipt  # 과거 인벤터 파일  
│   ├── button\_3d.ipt         # 키캡 인벤터 파일  
│   └── button\_3d.stl         # 3D 프린팅용 STL 파일  
├── arduino\_code/
│   ├── master.ino            # 마스터 아두이노 (Serial ↔ I2C 중계)  
│   ├── slave.ino             # 슬레이브 아두이노 (각 4개 버튼+릴레이 제어)  
│   └── switch\_test\_code.ino  # 버튼 스위치 단독 테스트용  

```

---

## ⚙️ 하드웨어 구성 및 포트 매핑

### 📡 슬레이브 아두이노 (각각 8, 9, 10번 주소)

| 핀 번호 | 연결 장치  | 설명                            |
|---------|-------------|---------------------------------|
| D2~D5   | 버튼 1~4    | 전등 아래 물리 버튼 입력        |
| D6~D9   | 릴레이 1~4  | 해당 버튼 위 전등 (LOW = ON)    |
| A4/A5   | SDA/SCL     | I2C 통신                        |

> 각 보드는 4개의 과녁을 제어하며, 총 3대(=12 과녁)

---

### 🧠 마스터 아두이노

| 핀 번호 | 연결 장치     | 설명                              |
|---------|----------------|-----------------------------------|
| USB     | PC             | UFO GUI와 시리얼 통신             |
| A4/A5   | SDA/SCL        | 슬레이브 아두이노들과 I2C 연결    |

---

## 🖥️ PC GUI 시스템 (UFO 타겟)

- **라이브러리**: [DearPyGui](https://github.com/hoffstadt/dearpygui)
- **동작 방식**:
  - 4x3 그리드에서 랜덤한 타겟 표시
  - 해당 타겟 정보를 마스터 아두이노로 전송
  - 정답 버튼이 눌릴 때까지 기다림
  - 버튼이 눌리면 다음 타겟으로 자동 진행

```
pip install dearpygui
python ufo_game.py
```

---

## ⚠️ 주의사항

* 릴레이 모듈은 **LOW일 때 ON**, HIGH일 때 OFF입니다.
* **AC 전원과 연결 시 반드시 절연 조치** 필요합니다.
* 스위치 단독 테스트 시에는 **D2 + GND만 연결하여 확인** 가능합니다.
* 아두이노 간 I2C 통신 시 **GND도 반드시 공통으로 연결**해야 정상 작동합니다.

---

## 📦 향후 확장 예정 기능

* 점수판 표시 및 히트 수 자동 집계
* 제한 시간 도입 및 랭킹 모드
* 버튼 눌림 시 사운드 또는 LED 반응 추가


---

추가하고 싶은 항목(예: 회로도 이미지, 점수판 기능 등)이 있다면 알려주세요. 바로 반영해드릴 수 있습니다.
